# 目录

[toc]

## 整型

- 使用`int`声明
- 输出/输入时使用`%d`匹配

## 浮点数

## 数组

```c
#include <stdio.h>
int main()
{
    int numbers[9];
    for (int i = 0; i <= 9; i++) {
        numbers[i] = i;
    }

    for (int i = 0; i <= 9; i++) {
        printf("%d\n", numbers[i]);
    }
    return 0;
}
```

数组是一种容器，其特点是

- 其中所有元素具有相同的数据类型
- 一旦创建，不能改变大小
  ~~只能用确定的数定义数组长度~~
  从 C99 开始可以在定义数组长度时使用变量
- 数组中的元素在内存中依次排列
- 数组`a[2]`可以出现在赋值的左边或右边
  例如`a[2]=a[1]+6`
- 数组的每个单元就是数组类型的一个变量
- `[]`中的数字叫做下标/索引,下标从 0 开始计数
  `a[2]`为数组`a`的第三个元素
- 编译器和运行环境都不会检测下标是否越界，不论是读还是写。
  一旦程序运行，越界的数组访问可能造成问题，导致程序崩溃 _(segmentation fault)_
  但也可能运气好，没造成严重后果
  程序员有责任来保证只使用有效的下标值：[0，数组的大小-1]
  ~~上面的代码示例就是一个越界得不是太明显的屑代码~~

## 函数

函数是一块代码，接收零个或多个参数，做一件事情，并返回零个或**一个**值

![函数定义](foundation.assets/2021-09-05-22-49-53.webp)

```c
int isPrime(int i)
{
    int ret = 1;
    int k;
    for (k = 2; k < i - 1; k++) {
        if (i % k == 0) {
            ret = 0;
            break;
        }
    }
    return ret;
}
```

### 返回类型

- 一个函数里可以出现多个`return`语句，但最好还是遵循单一出口原则，不要整多个 `return`。
- 没有返回值的函数，返回类型设为`void`（就是上面图片中那样），这样的函数不能使用带值的`return`，也可以没有`return`；
  如果函数是有返回值的(返回类型不是`void`),必须使用带值的`return`。

### 函数的声明

- 被调用的函数需要写在调用它的地方在上面，因为 C 的编译器自上而下分析代码，编译器在读取到某个函数时必须要事先知道它，但把这些函数写在 main 前面的话不太美观，于是可以这样：

```c
#include <stdio.h>

void sum(int begin, int end); // 函数的原型声明，以分号结尾
int main()
{
    sum(1, 5); // 调用函数
    return 0;
}

void sum(int begin, int end) // 函数定义
{
    int i;
    int sum = 0;
    for (i = begin; i <= end; i++) {
        sum += i;
    }
    printf("%d到%d的和是%d\n", begin, end, sum);
}
```

- 原型声明的作用预先告诉编译器，`sum`是一个函数，在编译器分析到该函数定义部分时，还会再检查一遍声明和定义是否一致。

- 编译器只检查参数的类型，所以原型里可以不写参数的名字，但是一般都写上。

### 传值

- 调用函数时给的值与声明的参数类型可以不匹配，编译器会自动帮我们转换类型，但很可能它转换的结果不是我们所期望的。~~这是 C 语言传统上最大的漏洞，C 语言之后的语言在这方面都要比 C 严格~~

- 每个函数有自己的变量空间，参数也位于这个独立的空间中，和其他函数没有关系。

```c
// 下面代码其实是无法达到目的的
// 原因见 “本地变量”
#include <stdio.h>

void swap(int a, int b);
int main()
{
    int x, y;
    scanf("%d %d", &x, &y);
    swap(x, y);
    printf("%d %d", x, y);
    return 0;
}

void swap(int a, int b)
{
    int t = a;
    a = b;
    b = t;
}
```

- 常常把声明与定义函数时的参数叫做形参，把调用函数时传入的参数叫做实参，这样容易让我等初学者混淆，其实他们之间就是**参数和值**的关系：我们在声明与定义函数时定义若干参数，在调用函数时传给它对应的若干个值；函数调用只做了一件事，那就是**传值**。~~和变量名无关~~

### 本地变量

- 又名局部变量、自动变量
- 函数每次运行，就产生了一个独立的变量空间，在这个空间中的变量，是函数的这次运行所独有的，称作本地变量。
- 定义在函数内部的变量就是本地变量
- 参数也是本地变量。
- 变量的生存期(变量出现到消亡)和作用域(代码内可以访问该变量的范围)：大括号内(块)。

- 本地变量定义在块内
  - 它可以定义在函数的块内
  - 也可以定义在语句的块内
  - 甚至可以随便拉一对大括号来定义变量
  - 程序运行在这个块内前，其中的变量不存在，离开这个块，其中的变量就消失了。

```c
    { // 这也是个块
        int xxx = 666;
        printf("%d", xxx);
    }
```

- 块外面的定义在块里面仍然有效
- 如果在块内定义了和块外同名的变量，则掩盖外面的(仅在块内“圈地自萌”，出去块以后就会恢复原值)
- 不能在一个块内定义同名的变量
- 参数在进入函数时被初始化

### 其他

- 形似`void foo()`的声明表示不知道要传入哪种参数、几个参数
- 形似`void foo(void)`的声明表示该函数没有参数
- 调用函数时的圆括号里的逗号是标点符号不是运算符
  - `foo(a,b)` 逗号是标点符号，传入两个参数
  - `foo((a,b))` 传入了一个参数，逗号是运算符
- C 语言不允许函数嵌套定义
  - 可以在一个函数内声明另一个函数
  - 但不能在一个函数内定义另一个函数
- ~~可以在声明变量的同时声明函数(不推荐)~~
  - ~~`int i, j, sum(int a, int b);`~~
- ~~`return` 后面可以加圆括号，但没有任何意义，不要这样做~~
  - ~~`return(i);`~~
- 关于`main`
  - `main` 是我们写的程序的入口
  - `int main()` 也是一个函数
